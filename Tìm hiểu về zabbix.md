# Mục lục - [1. Tổng quan về Zabbix](#tongquan)	+ [1.1 Zabbix là gì?](#khainiem)	+ [1.2 Tại sao lại lựa chọn zabbix](#taisao)	+ [1.3 Tính năng của zabbix](#tinhnang)	+ [1.4 Cấu trúc của zabbix](#cautruc)	+ [1.5 Yêu cầu](#yeucau)	+ [1.6 Các phiên bản](#phienban)	+ [1.7 Các khái niệm trong zabbix](#thuatngu)- [2. Cơ chế hoạt động](#coche)	+ [2.1 Giao thức giữa các thành phần trong zabbix](#giaothuc)	+ [2.2 Giao thức giữa server-client](#check)- [3. Tài liệu tham khảo](#tailieu)# Tìm hiểu về zabbix <a name=tongquan></a>## 1. Tổng quan về Zabbix <a name=khainiem></a>### 1.1 Khái niệm Zabbix được tạo ra bởi Alexei Vladishev, và hiện đang được Zabbix SIA tích cực phát triển và hỗ trợ.Zabbix là một công cụ mã nguồn mở giải quyết cho ta các vấn đề về giám sát. Zabbix là phần mềm sử dụng các tham số của một mạng, tình trạng và tính toàn vẹn của Server cũng như các thiết bị mạng. Zabbix sử dụng một cơ chế thống báo linh hoạt cho phép người dùng cấu hình email hoặc sms để cảnh báo dựa trên sự kiện được ta thiết lập sẵn. Ngoài ra Zabbix  cung cấp báo cáo và dữ liệu chính xác dựa trên cơ sở dữ liệu. Điều này khiến cho Zabbix trở nên lý tưởng hơn.Tất cả các cấu hình của Zabbix thông qua giao diện web.  Việc lên kế hoạch và cấu hình một cách đúng đắn sẽ giúp cho việc giám sát trở nên dễ dàng và thuận tiện hơn. Zabbix đóng một vai trò quan trọng trong việc theo dõi hạ tầng mạng.<a name=tai sao></a>## 1.2 Tại sao lại chọn Zabbix - Giám sát cả Server và thiết bị mạng- Dễ dàng thao tác và cấu hình- Hỗ trợ máy chủ Linux, Solaris, FreeBSD …- Đáng tin cậy trong việc chứng thực người dùng- Linh hoạt trong việc phân quyền người dùng- Giao diện web đẹp mắt- Thông báo sự cố qua email và SMS- Biểu đổ theo dõi và báo cáo- Mã nguồn mở và chi phí thấp- Mã hóa giúp giải thích các khả năng mã hóa thông tin liên lạc giữa các thành phần của Zabbix.<a name=tinhnang></a>## 1.3 Tính năng của Zabbix Zabbix là giải pháp giám sát mạng tích hợp cao cấp, cung cấp nhiều tính năng trong một gói.### Thu thập dữ liệu- Kiểm tra tính khả dụng và hiệu suất- Hỗ trợ SNMP, IPMI, JMX, VMware monitoring- Kiểm tra tùy chỉnh- Thu thập dữ liệu mong muốn theo các khoảng thời gian tùy chỉnh- Thực hiện bởi server, proxy, agents### Thiết lập linh hoạt ngưỡng cảnh báo Bạn có thể tự thiết lập các ngưỡng cảnh báo hoặc tham khảo các ngưỡng có sẵn trong zabbix ### Cảnh báo có tính cấu hình cao- Gửi thông báo có thể được tùy chỉnh cho lịch trình leo thang, người nhận, loại phương tiện truyền thông- Thông báo có thể được thực hiện có ý nghĩa và hữu ích bằng cách sử dụng các biến vĩ mô- Cảnh báo tự động bao gồm các lệnh từ xa### Biểu đồ thời gian thựcCác mục được giám sát ngay lập tức được vẽ đồ thị bằng cách sử dụng chức năng đồ thị được xây dựng sẵn### Giám sát trên giao diện web ### Sử dụng templates- Nhóm các kiểm tra trong templates- Các mẫu có thể kế thừa các templates khác### API ZabbixZabbix API cung cấp giao diện lập trình cho Zabbix cho các thao tác hàng loạt, tích hợp phần mềm của bên thứ ba và các mục đích khác.### Được viết bằng C, để thực hiện và tối ưu bộ nhớ ### Zabbix proxy giám sát từ xa và cân bằng tải<a name=cautruc></a>## 1.4 Cấu trúc Zabbix <img src="https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/Untitled%20Diagram.png?raw=true">### serverzabbix server  là thành phần trung tâm mà các agent báo cáo về tính có sẵn, toàn vẹn và số liệu thống kêMáy chủ là kho trung tâm, trong đó lưu trữ tất cả các cấu hình, dữ liệu thống kê và dữ liệu hoạt động.### Database storageTất cả thông tin cấu hình cũng như dữ liệu thu thập được của Zabbix được lưu trữ trong cơ sở dữ liệu. Zabbix sử dụng MySQL, PostgreSQL, SQLite, Oracle hoặc IBM DB2 làm database### Web interface Để dễ dàng truy cập Zabbix từ mọi nơi và từ bất kỳ nền tảng nào, giao diện web được cung cấp. Giao diện là một phần của máy chủ Zabbix, và thông thường (nhưng không nhất thiết) chạy trên cùng một máy vật lý như máy chủ chạy.**note** Giao diện web Zabbix phải chạy trên cùng một máy vật lý nếu dung SQLite làm sơ sở dữ liệu### Proxy- Zabbix proxy có thể thay zabbix server thu thập dữ liệu - Zabbix Proxy là một giải pháp lý tưởng cho việc giám sát tập trung của các địa điểm từ xa, chi nhánh công ty, các mạng lưới không có quản trị viên nội bộ.- Nó cũng có thể sử dụng để cân bằng tảiZabibix proxy có thể có hoặc không ### Agent Cài trực tiếp lên máy mà bạn muốn giám sát. Nó sẽ lấy thông tin từ đó Agent sẽ thu thập thông tin hoạt động từ Server mà nó đang chạy và báo cáo dữ liệu này đến Zabbix Server để xử lý.### Mã nguồnServer, proxy và agents được viết bằng ngôn ngữ C, the frontend is implemented in PHP and Javascript.<a name=yeucau></a>## 1.5 Yêu cầu#### Phần cứng Zabbix yêu cầu tối thiểu về RAM là 128, 256MB không gian trống của ổ đĩa cứng. Tuy nhiên số lượng ổ cứng tùy thuộc vào số lượng hosts và các thông số được giám sát.Phụ thuộc vào số lượng hosts được giám sát mà Zabbix yêu cầu tối thiểu các tài nguyên như sau: <img src="https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/yc%20tai%20nguy%C3%AAn.PNG?raw=true">- Yêu cầu các phần cứng khác Cổng giao tiếp nối tiếp và một modem GSM nối tiếp được yêu cầu để sử dụng hỗ trợ thông báo qua SMS trong Zabbix. Bộ chuyển đổi USB-to-serial cũng sẽ hoạt động.- Zabbix được thử nghiệm trên các nên tảng LinuxIBM AIX, FreeBSD, NetBSD, OpenBSD, HP-UX, Mac OS X, Solaris, Windows: tất cả các phiên bản máy tính để bàn và máy chủ từ năm 2000 (Agent Zabbix)#### Phần mềm Zabbix được xây dựng xung quanh một máy chủ web Apache, các công cụ cơ sở dữ liệu hàng đầu, và ngôn ngữ lập trình PHP.Hệ thống quản lý cơ sở dữ liệuPhần mềm sau đây để yêu cầu chạy giao diện Zabbix<img src"https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/phaanfmeem.PNG?raw=true"><a name=phienban></a>## 1.6 Các phiên bản của Zabbix<img src ="https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/phienban.png?raw=true"><a name=thuatngu></a>1.7 Các thuật ngữ trong Zabbix- Host: Thiết bị cần giám sát.- Group: Nhóm thiết bị cần giám sát có các thuộc tính giống nhau.- item: Một số dữ liệu mà bạn muốn nhận từ máy chủ lưu trữ - Trigger: Một biểu thức logic xác định một ngưỡng vấn đề. Khi dữ liệu nhận được ở trên ngưỡng, các trình kích hoạt sẽ đi từ 'Ok' sang trạng thái 'Problem'. tham khảo thêm tài liệu ở đây <a href="https://www.zabbix.com/documentation/3.0/manual/concepts/definitions">Definitions</a><a name=coche></a>## 2. Các cơ chế hoạt động <a name=giaothuc></a>### 2.1 Các giao thức sử dụng zabbix - Giao thức UDP được sử dụng khi check SNMP- Giao thức giữa web interface và zabbix server là httpMình dùng wireshark để kiểm tra <img src="https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/http.PNG?raw=true">Địa chỉ ip 192.168.76.128 chính là địa chỉ zabbix server Ngoài ra còn có giao thức json.RFC được sử dụng trong Zabbix <a href="http://www.tcpdump.org/tcpdump_man.html">Tham khảo</a>- Việc truy xuất giữa zabbix server, web interface, agent truy xuất database bằng giao thức TCP kết nối đến port 3306 nếu sử dụng mysql bằng ngôn ngữ SQL- Giám sát SNMP được sử dụng để kiểm tra thông tin  trên các thiết bị như máy in, thiết bị chuyển mạch mạng, bộ định tuyến ...<a name=check></a>### 2.2 Cơ chế giữa server và clientZabbix server thu thập thông tin từ Agent thông qua các item tương ứng. Các item có nhiều loại, tuy nhiên 2 loại chính là Active Item (Item chủ động) và Passive Item (Item bị động)#### Zabbix Passive Check là gì?- Đây là kiểu kiểm tra tương ứng với Item Zabbix Passive (bị động), kiểu này có đặc tính là công việc ưu cầu thông tin cần giám sát thuộc về Zabbix Server.- Zabbix Server sẽ request thông tin cần tìm kiếm đến các Agent theo các khoảng thời gian (interval time) đã được cấu hình trong item tương ứng, lấy thông tin monitor và báo cáo lại về hệ thống ngay lập tức. Server khởi tạo kết nối, Agent luôn ở chế động lắng nghe kết nối từ Server.<img src="https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/pass%20chechk.png?raw=true">Passive Check- Tiến trình :		+ Server mở kết nối TCP đến Zabbix Agent	+ Server gửi ưu cầu thu thập thông tin với item tương ứng. Ví dụ : "agent.ping"	+ Agent nhận ưu cầu, phân tích, thu thập dữ liệu và gửi trả về Server. Với item "agent.ping", kết quả trả về ở đây sẽ là "0" hoặc "1".	+ Kết nối TCP đóng lại- Nội dung gói tin "Server request" : 	``agent.ping\n``- Nội dung gói tin "Agent response" : 	``<HEADER><DATALEN>1``	#### Zabbix Active Check là gì?- Đây là kiểu kiểm tra tương ứng với Item Active (chủ động), đặc tính của kiểu này là công việc chủ động request thông tin cần giám sát thuộc về Zabbix Agent. Kiểu kiếm tra này hay dùng khi Zabbix Server không thể kết nối trực tiếp đến Zabbix Agent (có thể do chính sách firewall...)- Zabbix Agent sẽ chủ động gửi request đến Zabbix Server nhằm lấy thông tin về các Item được Server chỉ định sẵn. Sau khi lấy được danh sách item thì Agent sẽ xử lý động lập rồi gửi tuần tự thông tin về cho Server. Server sẽ không khởi tạo kết nối nào mà chỉ trả lời request item list và nhận lại thông tin được trả về. Tuy nhiên nếu Agent trei hoặc chết thì Server sẽ không nhận được bất kỳ kết nối nào.<img src="https://github.com/nguyenminh12051997/meditech-thuctap/blob/master/MinhNV/Ghi%20ch%C3%A9p%20zabbix/images/acticon%20check.png?raw=true">Active Check- Tiến trình :	+ Agent mở kết nối TCP đến Zabbix Server	+ Agent yêu cầu danh sách item cần thu thập	+ Server phản hồi với danh sách item tương ứng ( danh sách này đã được định sẵn trước đó, gồm item key, delay).	+ Kết nối TCP đóng lại.Agent bắt đầu thu thập thông tin tương ứng với danh sách item nhận được.<a name=tailieu></a># 3. Tài liệu tham khảo- https://www.zabbix.com/documentation/3.0- https://github.com/hocchudong/ghichep-zabbix/blob/master/Zabbix/Phan%20biet%20Zabbix%20active%20check%20va%20Zabbix%20passive%20check.md